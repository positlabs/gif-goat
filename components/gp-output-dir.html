
<!-- 


-->

<dom-module id='gp-output-dir'>

	<style>
		
		:host {
			position: relative;
			-webkit-user-select: none;
		}

		.path {
			font-size: .8em;
		}

	</style>
	
	<template>
		<div id='outputBtn' class='btn' on-click='_onClickOutputBtn'>
			<span>Output folder</span>
			<span class='fa fa-folder'></span>
		</div>
		<input id='output-dir-btn' type='file' webkitdirectory directory hidden>

		<div class='path btn' on-click='_onClickOpenOutputBtn'>
			<span>[[path]]</span>
			<span class='fa fa-folder-open'></span>
		</div>
	</template>

	<script>(function(){

		var path = require('path');

		Polymer({
			is: 'gp-output-dir',
			
			properties: {
				path: {
					type: String,
					value: '',	
				}
			},

			ready: function(){
				
				this.path = localStorage.getItem('output-dir') || path.join(nw.App.dataPath, 'output');

				// FIXME: set this value. Not a huge deal, but it will open a file browser in the default location
				// as opposed to the one that is actually selected 
				// this.$['output-dir-btn'].value = path.join(nw.App.dataPath, 'output');

				this.$['output-dir-btn'].addEventListener('change', this._onInputChanged.bind(this));
			},

			_onClickOpenOutputBtn: function(){
				nw.Shell.openItem(this.path);
			},

			_onClickOutputBtn: function(){
				this.$['output-dir-btn'].click();
			},

			_onInputChanged: function(e){
				console.log(this.localName, '_onInputChanged', e);
				this.path = e.target.value;
				localStorage.setItem('output-dir', this.path);
			},
		});

	})();</script>

</dom-module>