
<!-- 


-->

<dom-module id='gp-output-dir'>

	<style>
		
		:host {
			position: relative;
			-webkit-user-select: none;
		}

		.path {
			font-size: .8em;
		}

	</style>
	
	<template>
		<div id='outputBtn' class='btn' on-click='_onClickOutputBtn'>
			<span>Output folder</span>
			<span class='fa fa-folder'></span>
		</div>

		<div class='path btn' on-click='_onClickOpenOutputBtn'>
			<span>{{path}}</span>
			<span class='fa fa-folder-open'></span>
		</div>
	</template>

	<script>(function(){

		var path = require('path');
		var shell = require('electron').shell;
		var paths = require('./modules/paths');

		Polymer({
			is: 'gp-output-dir',
			
			properties: {
				path: {
					type: String,
					value: '',
				}
			},

			ready: function(){
				this.path = localStorage.getItem('output-dir') || paths.desktop;
				ipc.on('request-output-dir', this._gotOutputDir.bind(this));
			},

			_onClickOpenOutputBtn: function(){
				//FIXME: open in the damn foreground!
				shell.openItem(this.path);
			},

			_onClickOutputBtn: function(){
				ipc.send('request-output-dir');
			},

			_gotOutputDir: function(event, outputDir){
				// console.log('_gotOutputDir', outputDir);

				this.path = outputDir;
				localStorage.setItem('output-dir', this.path);
			},

		});

	})();</script>

</dom-module>